(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31c6b7b3"],{ab10:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("StarBox",{attrs:{type:e.type}}),n("div",{staticClass:"sale-info"},[n("SaleInfo",{attrs:{type:e.type,info:e.saleData}})],1),n("MintBtn",{attrs:{type:e.type,info:e.saleData},on:{mintNft:e.mintNft}}),n("div",{staticClass:"notice"},[n("div",{staticClass:"notice-title"},[e._v(e._s(e.$t("preSale.rewardRule")))]),n("div",[e._v(e._s(e.$t("preSale.rule1")))]),n("div",[e._v(e._s(e.$t("preSale.rule2")))])]),e.codePopShow?n("CommomPop",{on:{close:e.changeShowCodePop}},[n("div",{staticClass:"pop-wrapper"},[n("div",{staticClass:"pop-title"},[e._v(e._s(e.$t("preSale.inputCode")))]),n("van-field",{staticClass:"form-input",attrs:{"input-align":"center",placeholder:e.$t("preSale.inputCode"),maxlength:"6"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),n("VanButton",{staticClass:"mint-btn",attrs:{loading:e.codeLoading,disabled:!e.code},on:{click:e.handleCode}},[e._v(e._s(e.$t("common.confirm")))])],1)]):e._e(),e.nftShow?n("NftPop",{ref:"nftPop",attrs:{info:e.saleData,nftFilePath:e.nftFilePath,nftName:e.nftName},on:{close:e.changeShowNftPop}}):e._e(),e.loadingShow?n("LoadingPop",{attrs:{needTimer:!1},scopedSlots:e._u([e.countShow?{key:"countdown",fn:function(){return[n("div",{staticClass:"countDown"},[n("vanCountDown",{attrs:{time:e.countDownTime,format:"ss"},on:{finish:e.countDownFinish}}),e._v(e._s(e.$t("common.second"))+" ")],1)]},proxy:!0}:null],null,!0)},[n("div",{staticClass:"countDown tips"},[e._v(" "+e._s(e.$t("preSale.minting"))+" ")])]):e._e()],1)},o=[],r=n("1da1"),i=(n("96cf"),n("c358")),s=n("489b"),c=n("4144"),u=n("9598"),l=n("39db"),d=n("f27b"),f=n("63bf"),h=n("c645"),p=12,m={name:"",components:{StarBox:i["a"],SaleInfo:s["a"],MintBtn:c["a"],CommomPop:u["a"],NftPop:l["a"],LoadingPop:d["a"]},data:function(){return{nftFilePath:"",timer:null,type:0,saleData:{total:0,totalSold:0,roundNumber:0,price:"1000",isHadNFT:1,isEligible:0,rechargeAddress:"",token:""},codePopShow:!1,codeLoading:!1,code:"",nftShow:!1,nftShowFlag:!1,loadingShow:!1,countDownTime:6e4,countShow:!1,nftName:"StarFish"}},methods:{init:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("changeLoading",!0),t.next=3,e.getNftName();case 3:e.getInfo(),setTimeout((function(){e.$emit("changeLoading",!1)}),1500);case 5:case"end":return t.stop()}}),t)})))()},getInfo:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={type:e.type},t.next=3,Object(f["b"])(n);case 3:if(a=t.sent,a.success){t.next=6;break}return t.abrupt("return");case 6:e.saleData=a.data||e.saleData,e.saleData.roundNumber=e.saleData.total,a.data.isHadNFT&&(e.getNftName(a.data.tokenType),clearInterval(e.timer),e.timer=null,e.loadingShow=!1,e.nftShowFlag||(e.nftShowFlag=!0,e.nftShow=!0));case 9:case"end":return t.stop()}}),t)})))()},getNftName:function(){var e=arguments,t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:0,n.next=3,h["a"].getName(a);case 3:if(o=n.sent,o.success){n.next=6;break}return n.abrupt("return");case 6:t.nftName=o.result;case 7:case"end":return n.stop()}}),n)})))()},judgeMint:function(){this.$emit("changeLoading",!0),this.mintNft()},changeShowCodePop:function(){this.codePopShow=!this.codePopShow},handleCode:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.code){t.next=2;break}return t.abrupt("return");case 2:return e.codeLoading=!0,t.next=5,Object(f["a"])(e.code);case 5:if(n=t.sent,n.success){t.next=9;break}return e.codeLoading=!1,t.abrupt("return");case 9:e.mintNft();case 10:case"end":return t.stop()}}),t)})))()},mintNft:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$emit("changeLoading",!0),e.saleData.token&&e.saleData.rechargeAddress){t.next=3;break}return t.abrupt("return",e.$emit("changeLoading",!1));case 3:return e.$emit("changeLoadingIconType",1),t.next=6,e.$web3.transferToken(e.saleData.token,e.saleData.rechargeAddress,e.saleData.price);case 6:if(n=t.sent,e.codeLoading=!1,e.$emit("changeLoading",!1),n.success){t.next=11;break}return t.abrupt("return");case 11:e.$emit("changeLoadingIconType",1),e.countShow=!0,e.loadingShow=!0,e.setTimer();case 15:case"end":return t.stop()}}),t)})))()},countDownFinish:function(){this.countShow=!1},setTimer:function(){var e=this;this.timer=setInterval((function(){p-=1,e.getInfo(),p<=1&&(clearInterval(e.timer),e.timer=null)}),5e3)},changeShowNftPop:function(){this.nftShow=!this.nftShow,this.codePopShow=!1}},mounted:function(){this.init()}},g=m,w=(n("e7e53"),n("2877")),v=Object(w["a"])(g,a,o,!1,null,"7f6856b7",null);t["default"]=v.exports},b157:function(e,t,n){},e7e53:function(e,t,n){"use strict";n("b157")}}]);
//# sourceMappingURL=chunk-31c6b7b3.72474510.js.map