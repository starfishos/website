(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61894c32"],{"14f6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("PreSaleHeader",{on:{handleLangShow:e.handleLangShow}}),n("div",{staticClass:"page"},[n("StarBox",{attrs:{type:e.type,info:e.saleData}}),n("SaleInfo",{attrs:{type:e.type,info:e.saleData}}),e.countTime>0?n("div",{on:{click:e.judgeMint}},[n("van-count-down",{staticClass:"mint-btn",attrs:{time:e.countTime,format:"HH:mm:ss"},on:{finish:e.preCountFinish}})],1):n("MintBtn",{attrs:{type:e.type,info:e.saleData},on:{mintNft:e.judgeMint}}),n("div",{staticClass:"notice"},[n("div",{staticClass:"notice-title"},[e._v(e._s(e.$t("preSale.kolRule")))]),n("div",{domProps:{innerHTML:e._s(e.$t("preSale.kol1"))}},[e._v(" "+e._s(e.$t("preSale.kol1"))+" ")])]),e.codePopShow?n("CommomPop",{on:{close:e.changeShowCodePop}},[n("div",{staticClass:"pop-wrapper"},[n("div",{staticClass:"pop-title"},[e._v(e._s(e.$t("preSale.inputCode")))]),n("van-field",{staticClass:"form-input",attrs:{"input-align":"center",placeholder:e.$t("preSale.inputCode"),maxlength:"6"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),n("VanButton",{staticClass:"mint-btn",attrs:{loading:e.codeLoading,disabled:!e.code},on:{click:e.handleCode}},[e._v(e._s(e.$t("common.confirm")))])],1)]):e._e(),e.nftShow?n("NftPop",{attrs:{info:e.saleData,nftFilePath:e.nftFilePath,nftName:e.nftName},on:{close:e.changeShowNftPop}}):e._e(),e.loadingShow?n("LoadingPop",{attrs:{needTimer:!1},scopedSlots:e._u([e.countShow?{key:"countdown",fn:function(){return[n("div",{staticClass:"countDown"},[n("vanCountDown",{attrs:{time:e.countDownTime,format:"ss"},on:{finish:e.countDownFinish}}),e._v(e._s(e.$t("common.second"))+" ")],1)]},proxy:!0}:null],null,!0)},[n("div",{staticClass:"countDown tips"},[e._v(" "+e._s(e.$t("preSale.minting"))+" ")])]):e._e(),e.langShow?n("ChangeLangPop",{on:{close:e.handleLangShow}}):e._e()],1)],1)},o=[],i=n("1da1"),r=(n("ac1f"),n("5319"),n("4d63"),n("c607"),n("2c3e"),n("25f0"),n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-wrapper"},[n("div",{staticClass:"header"},[n("div",{staticClass:"address",attrs:{translate:"no"}},[e._v(" "+e._s(e.$gbUtils.formatAddress(e.myAccount,"...",6))+" ")]),n("div",{staticClass:"menu iconfont manu",on:{click:e.handleLangShow}})])])}),s=[],c=n("5530"),u=n("2f62"),l={name:"Header",data:function(){return{}},methods:{init:function(){},handleLangShow:function(){this.$emit("handleLangShow")}},computed:Object(c["a"])({},Object(u["c"])(["myAccount"])),mounted:function(){this.init()}},d=l,h=(n("af4a"),n("2877")),f=Object(h["a"])(d,r,s,!1,null,"04d652f0",null),g=f.exports,p=n("3c48"),m=n("c358"),w=n("489b"),b=n("4144"),v=n("9598"),S=n("39db"),x=n("f27b"),C=n("c645"),k=n("63bf"),_=12,D={name:"",components:{StarBox:m["a"],SaleInfo:w["a"],MintBtn:b["a"],CommomPop:v["a"],NftPop:S["a"],LoadingPop:x["a"],PreSaleHeader:g,ChangeLangPop:p["a"]},data:function(){return{langShow:!1,nftFilePath:"kol",timer:null,type:1,saleData:{total:0,totalSold:0,roundNumber:0,price:"1000",isHadNFT:1,isEligible:0,rechargeAddress:"",token:""},codePopShow:!1,codeLoading:!1,code:"",nftShow:!1,nftShowFlag:!1,loadingShow:!1,countDownTime:6e4,countShow:!1,nftName:"StarFish",enableBuy:!1,countTime:0}},methods:{reload:function(){},preCountFinish:function(){this.countTime=0,this.getInfo()},handleLangShow:function(){this.langShow=!this.langShow},init:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("changeLoading",!0),e.getInfo(),t.next=4,e.getNftName();case 4:setTimeout((function(){e.$emit("changeLoading",!1)}),1500);case 5:case"end":return t.stop()}}),t)})))()},getInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,o,i,r,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={type:e.type},t.next=3,Object(k["b"])(n);case 3:if(a=t.sent,a.success){t.next=6;break}return t.abrupt("return");case 6:e.saleData=a.data||e.saleData,o=(new Date).getTime(),i=e.saleData.beginDate||0,i&&(i=i.replace(new RegExp("-","gm"),"/"),i=new Date(i).getTime(),console.log(i,"begin"),r=i-o,console.log(r,"differ"),e.countTime=r>0?r:0),s=e.saleData.endDate||0,s&&(s=s.replace(new RegExp("-","gm"),"/"),s=new Date(s).getTime()),c=s-o,e.enableBuy=c>0,a.data.isHadNFT&&(e.getNftName(a.data.tokenType),clearInterval(e.timer),e.timer=null,e.loadingShow=!1,e.nftShowFlag||(e.nftShowFlag=!0,e.nftShow=!0));case 15:case"end":return t.stop()}}),t)})))()},getNftName:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:1,n.next=3,C["a"].getName(a);case 3:if(o=n.sent,o.success){n.next=6;break}return n.abrupt("return");case 6:t.nftName=o.result;case 7:case"end":return n.stop()}}),n)})))()},judgeMint:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.saleData.isCode||e.enableBuy){t.next=2;break}return t.abrupt("return",e.$toast(e.$t("preSale.saleEnd")));case 2:if(!e.saleData.isCode||e.saleData.isEligible){t.next=4;break}return t.abrupt("return",e.$toast(e.$t("preSale.pleaseWait")));case 4:return t.next=6,e.getInfo();case 6:e.saleData.isCode?e.saleData.isEligible&&(e.$emit("changeLoading",!0),e.mintNft()):e.changeShowCodePop();case 7:case"end":return t.stop()}}),t)})))()},changeShowCodePop:function(){this.codePopShow=!this.codePopShow},handleCode:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.code){t.next=2;break}return t.abrupt("return");case 2:return e.codeLoading=!0,t.next=5,Object(k["a"])(e.code);case 5:if(n=t.sent,n.success){t.next=9;break}return e.codeLoading=!1,t.abrupt("return");case 9:return e.changeShowCodePop(),t.next=12,e.getInfo();case 12:e.judgeMint();case 13:case"end":return t.stop()}}),t)})))()},mintNft:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("changeLoadingIconType",1),e.loadingShow=!0,t.next=4,e.$web3.transferToken(e.saleData.token,e.saleData.rechargeAddress,e.saleData.price);case 4:if(n=t.sent,n.success){t.next=9;break}return e.codeLoading=!1,e.loadingShow=!1,t.abrupt("return");case 9:e.countShow=!0,e.setTimer();case 11:case"end":return t.stop()}}),t)})))()},countDownFinish:function(){this.countShow=!1},setTimer:function(){var e=this;this.timer=setInterval((function(){_-=1,e.getInfo(),_<=1&&(clearInterval(e.timer),e.timer=null)}),5e3)},changeShowNftPop:function(){this.nftShow=!this.nftShow,this.codePopShow=!1}},mounted:function(){this.init()}},P=D,L=(n("2f48"),Object(h["a"])(P,a,o,!1,null,"510c0724",null));t["default"]=L.exports},"2f48":function(e,t,n){"use strict";n("bf23")},"3c48":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VanPopup",{staticStyle:{"box-sizing":"border-box",width:"93%","max-width":"400px","background-color":"#000",padding:"20px 30px","box-shadow":"0px 2px 4px 0px rgba(0, 0, 0, 1)","border-radius":"4px"},attrs:{round:""},on:{"click-overlay":e.closePop},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",{staticClass:"lang-wrap",attrs:{translate:"no"}},[n("div",{staticClass:"title"},[e._v(e._s(e.$t("home.changeLang")))]),n("div",{staticClass:"lang-item",class:{active:"EN"===e.lang},on:{click:function(t){return e.changeLanguage("EN")}}},[e._v(" English ")]),n("div",{staticClass:"lang-item",class:{active:"ZH"===e.lang},on:{click:function(t){return e.changeLanguage("ZH")}}},[e._v(" 繁體中文 ")])])])},o=[],i=n("5530"),r=n("2f62"),s={name:"",data:function(){return{show:!0}},methods:Object(i["a"])(Object(i["a"])({},Object(r["b"])(["changeLang"])),{},{changeLanguage:function(e){this.changeLang(e),this.$toast("Success"),this.$parent.reload(),this.closePop()},closePop:function(){this.$emit("close")}}),computed:Object(i["a"])({},Object(r["c"])(["lang"])),mounted:function(){}},c=s,u=(n("4028"),n("2877")),l=Object(u["a"])(c,a,o,!1,null,"641f94e3",null);t["a"]=l.exports},4028:function(e,t,n){"use strict";n("efff")},"5de1":function(e,t,n){},af4a:function(e,t,n){"use strict";n("5de1")},bf23:function(e,t,n){},efff:function(e,t,n){}}]);
//# sourceMappingURL=chunk-61894c32.72474510.js.map