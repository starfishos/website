{"version":3,"sources":["webpack:///./src/components/common/Editor.vue?9d31","webpack:///./src/services/news.js","webpack:///./src/services/upload.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/mediaAdmin/ReleaseArticle.vue?b70e","webpack:///./src/views/mediaAdmin/ReleaseArticle.vue?0d26","webpack:///./src/components/common/Editor.vue?de9c","webpack:///./src/utils/editor.js","webpack:///src/components/common/Editor.vue","webpack:///./src/components/common/Editor.vue?5446","webpack:///./src/components/common/Editor.vue","webpack:///src/views/mediaAdmin/ReleaseArticle.vue","webpack:///./src/views/mediaAdmin/ReleaseArticle.vue?3ef5","webpack:///./src/views/mediaAdmin/ReleaseArticle.vue"],"names":["handleMediaInfo","params","request","handleAdminNewsList","handleNewsList","handleAddNews","handleNewsDetail","handleEditNews","handleDeleteNews","upload","DESCRIPTORS","FUNCTION_NAME_EXISTS","EXISTS","uncurryThis","defineProperty","f","FunctionPrototype","Function","prototype","functionToString","toString","nameRE","regExpExec","exec","NAME","configurable","get","this","error","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","$t","model","value","dataForm","callback","$$v","$set","expression","_v","_s","afterRead","fileList","directives","name","rawName","isImportant","on","handleIsImportant","staticRenderFns","ref","style","height","marginBottom","marginB","editorOption","disabled","$event","onEditorChange","data","staticStyle","TiLength","limit","uploadConfig","action","config","server","methods","size","accept","toolOptions","header","list","script","indent","color","background","align","handlers","image","self","fileInput","container","querySelector","document","createElement","setAttribute","classList","add","addEventListener","formData","FormData","append","files","xhr","XMLHttpRequest","open","onload","res","status","JSON","parse","responseText","length","quill","getSelection","index","insertEmbed","imgUrl","url","setSelection","onloadstart","e","onerror","message","onloadend","send","appendChild","click","placeholder","modules","toolbar","components","props","type","default","prop","event","computed","created","watch","handler","newVal","deep","immediate","$emit","$nextTick","father","getElementsByClassName","children","init","evt","clipboardData","forEach","call","file","match","uploadToServer","$message","getLength","mounted","$refs","myTextEditor","fontSizeStyle","Quill","Font","component","title","content","preview","theme","console","formdata","resp","getDetail","id","$route","query","Editor"],"mappings":"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","file":"js/chunk-6e9be22d.72474510.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=style&index=0&id=6eab2cdf&scoped=true&lang=scss&\"","import request from '@/utils/request'\n\n// 资讯首页信息\nexport const handleMediaInfo = (params) => {\n  return request(\n    'GET',\n    '/dapp/information/getInformationAdminIndex',\n    params,\n    true,\n    true,\n    1\n  )\n}\n\n// 机构资讯列表\nexport const handleAdminNewsList = (params) => {\n  return request('GET', '/dapp/information/adminList', params)\n}\n\n// 用户资讯列表\nexport const handleNewsList = (params) => {\n  return request('GET', '/dapp/information/list', params, true, true)\n}\n\n// 发布资讯\nexport const handleAddNews = (params) => {\n  return request('POST', '/dapp/information', params)\n}\n\n// 资讯详情\nexport const handleNewsDetail = (params) => {\n  return request('GET', `/dapp/information/${params}`, params, true, true)\n}\n// 修改资讯\nexport const handleEditNews = (params) => {\n  return request('PUT', '/dapp/information', params)\n}\n// 删除资讯\nexport const handleDeleteNews = (params) => {\n  return request('DELETE', `/dapp/information/${params}`)\n}\n","import request from '@/utils/request'\n\n// 上传\nexport const upload = (params) => {\n  return request('POST', '/dapp/oss/upload', params, true, true)\n}\n","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReleaseArticle.vue?vue&type=style&index=0&id=3085d2d2&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"release-wrap\"},[_c('van-field',{staticClass:\"title-wrap\",attrs:{\"rows\":\"2\",\"autosize\":\"\",\"type\":\"textarea\",\"translate\":\"no\",\"maxlength\":\"50\",\"placeholder\":_vm.$t('common.inputTitle'),\"show-word-limit\":\"\"},model:{value:(_vm.dataForm.title),callback:function ($$v) {_vm.$set(_vm.dataForm, \"title\", $$v)},expression:\"dataForm.title\"}}),_c('div',{staticClass:\"set-image\"},[_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.$t('admin.setPreview')))]),_c('van-uploader',{attrs:{\"after-read\":_vm.afterRead},model:{value:(_vm.fileList),callback:function ($$v) {_vm.fileList=$$v},expression:\"fileList\"}},[_c('div',{staticClass:\"upload\"},[_c('van-icon',{staticClass:\"icon\",attrs:{\"name\":\"plus\",\"size\":\"25\"}})],1)])],1),_c('div',{staticClass:\"editor\",attrs:{\"translate\":\"no\"}},[_c('Editor',{attrs:{\"height\":\"440\"},model:{value:(_vm.dataForm.content),callback:function ($$v) {_vm.$set(_vm.dataForm, \"content\", $$v)},expression:\"dataForm.content\"}})],1),_c('div',{staticClass:\"icon-group\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.dataForm.isImportant),expression:\"!dataForm.isImportant\"}],staticClass:\"icon-normal\",on:{\"click\":_vm.handleIsImportant}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dataForm.isImportant),expression:\"dataForm.isImportant\"}],staticClass:\"icon-select\",on:{\"click\":_vm.handleIsImportant}},[_c('div',{staticClass:\"dot\"})]),_c('span',[_vm._v(_vm._s(_vm.$t('admin.important')))])]),_c('div',{staticClass:\"button\",on:{\"click\":_vm.handleAddNews}},[_vm._v(_vm._s(_vm.$t('admin.release')))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('quill-editor',{ref:\"myTextEditor\",staticClass:\"editorBox\",style:({ height: _vm.height + 'px', marginBottom: _vm.marginB + 'px' }),attrs:{\"options\":_vm.editorOption,\"disabled\":_vm.disabled},on:{\"change\":function($event){return _vm.onEditorChange($event)}},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}}),_c('div',{staticStyle:{\"text-align\":\"right\",\"font-size\":\"12px\"}},[_vm._v(\" \"+_vm._s(_vm.TiLength)+\"/\"+_vm._s(_vm.limit)+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Toast } from 'vant'\nimport config from '@/config/app.config'\n\n/* 富文本编辑图片上传配置 */\nconst uploadConfig = {\n  action: config.server + '/dapp/oss/upload', // 必填参数 图片上传地址\n  methods: 'POST', // 必填参数 图片上传方式\n  // token: 'Bearer ' + getToken(), // 可选参数 如果需要token验证，假设你的token有存放在sessionStorage\n  name: 'file', // 必填参数 文件的参数名\n  size: 2000, // 可选参数   图片大小，单位为Kb, 1M = 1024Kb\n  accept: 'image/png, image/gif, image/jpeg, image/bmp, image/x-icon' // 可选 可上传的图片格式\n}\n// toolbar工具栏的工具选项\nconst toolOptions = [\n  ['bold', 'italic', 'underline', 'strike'], // 加粗，斜体，下划线，删除线\n  [{ header: 1 }, { header: 2 }], // 几级标题\n  [{ list: 'ordered' }, { list: 'bullet' }], // 有序列表，无序列表\n  [{ script: 'sub' }, { script: 'super' }], // 下角标，上角标\n  [{ indent: '-1' }, { indent: '+1' }], // 缩进\n  // [{ size: ['13px', '16px', '18px', '20px', '30px', '40px', '50px', '60px'] }], // 字体大小\n  [{ color: [] }, { background: [] }], // 颜色选择\n  // [{ font: ['Microsoft-YaHei', 'SimSun', 'SimHei', 'KaiTi', 'FangSong'] }], // 字体\n  [{ align: [] }], // 居中\n  ['clean'], // 清除样式\n  ['link', 'image']\n]\n// 处理图片上传事件,更改为base64为上传到服务器\nconst handlers = {\n  image: function image () {\n    var self = this\n\n    var fileInput = this.container.querySelector('input.ql-image[type=file]')\n    if (fileInput === null) {\n      fileInput = document.createElement('input')\n      fileInput.setAttribute('type', 'file')\n      // 设置图片参数名\n      if (uploadConfig.name) {\n        fileInput.setAttribute('name', uploadConfig.name)\n      }\n      // 可设置上传图片的格式\n      fileInput.setAttribute('accept', uploadConfig.accept)\n      fileInput.classList.add('ql-image')\n      // 监听选择文件\n      fileInput.addEventListener('change', function () {\n        // 创建formData\n        var formData = new FormData()\n        formData.append(uploadConfig.name, fileInput.files[0])\n        // 图片上传\n        var xhr = new XMLHttpRequest()\n        xhr.open(uploadConfig.methods, uploadConfig.action, true)\n        // 上传数据成功，会触发\n        xhr.onload = function (res) {\n          if (xhr.status === 200) {\n            res = JSON.parse(xhr.responseText)\n            const length = self.quill.getSelection(true).index\n            // 这里很重要，你图片上传成功后，img的src需要在这里添加，res.path就是你服务器返回的图片链接。\n            self.quill.insertEmbed(\n              length,\n              'image',\n              config.imgUrl + res.data.url\n            )\n            self.quill.setSelection(length + 1)\n          }\n          fileInput.value = ''\n        }\n        // 开始上传数据\n        xhr.upload.onloadstart = function (e) {\n          fileInput.value = ''\n        }\n        // 当发生网络异常的时候会触发，如果上传数据的过程还未结束\n        xhr.upload.onerror = function (e) {\n          Toast.error({\n            message: '图片上传失败'\n          })\n        }\n        // 上传数据完成（成功或者失败）时会触发\n        xhr.upload.onloadend = function (e) {\n          // console.log('上传结束')\n        }\n        xhr.send(formData)\n      })\n      this.container.appendChild(fileInput)\n    }\n    fileInput.click()\n  }\n}\n\nexport default {\n  placeholder: '',\n  modules: {\n    toolbar: {\n      container: toolOptions, // 工具栏选项\n      handlers: handlers // 事件重写\n    }\n  }\n}\n","\n<template>\n  <div>\n    <quill-editor\n      ref=\"myTextEditor\"\n      class=\"editorBox\"\n      :options=\"editorOption\"\n      v-model=\"data\"\n      :style=\"{ height: height + 'px', marginBottom: marginB + 'px' }\"\n      :disabled=\"disabled\"\n      @change=\"onEditorChange($event)\"\n    ></quill-editor>\n    <div style=\"text-align: right; font-size: 12px\">\n      {{ TiLength }}/{{ limit }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Quill } from 'vue-quill-editor'\nimport 'quill/dist/quill.core.css'\nimport 'quill/dist/quill.snow.css'\nimport 'quill/dist/quill.bubble.css'\nimport quillConfig from '@/utils/editor'\nimport config from '@/config/app.config'\n\nexport default {\n  components: {\n\n  },\n  props: {\n    value: String, // 绑定的值，在组件上使用 v-model 绑定一个值\n    // 高度设置\n    height: {\n      type: [Number, String],\n      default: 240\n    },\n    // 下边距距离\n    marginB: {\n      type: [Number, String],\n      default: 10\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    limit: {\n      type: Number,\n      default: 4000\n    }\n  },\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  data () {\n    return {\n      data: '', // 富文本绑定的值\n      editorOption: quillConfig,\n      TiLength: 0\n    }\n  },\n  computed: {\n\n  },\n  created () {\n\n  },\n  watch: {\n    value: {\n      handler (newVal) {\n        if (newVal) {\n          this.data = newVal\n        }\n      },\n      deep: true,\n      immediate: true\n    },\n    data (newVal) {\n      this.$emit('change', newVal)\n    },\n    disabled: {\n      handler (newVal) {\n        if (newVal) {\n          this.$nextTick(() => {\n            var father = document.getElementsByClassName('editorBox')[0]\n            var children = document.getElementsByClassName('ql-toolbar')[0]\n            father.removeChild(children)\n          })\n        }\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  methods: {\n    //  自定义粘贴图片功能\n    init () {\n      const quill = this.$refs.myTextEditor.quill\n      quill.root.addEventListener('paste', evt => {\n        if (evt.clipboardData && evt.clipboardData.files && evt.clipboardData.files.length) {\n          evt.preventDefault();\n          [].forEach.call(evt.clipboardData.files, file => {\n            if (!file.type.match(/^image\\/(gif|jpe?g|a?png|bmp)/i)) {\n              return\n            }\n            this.uploadToServer(file)\n          })\n        }\n      }, false)\n    },\n    // 修改粘贴图片为上传到服务器\n    uploadToServer (file) {\n      const uploadConfig = {\n        action: config.server + '/dapp/oss/upload', // 必填参数 图片上传地址\n        methods: 'POST', // 必填参数 图片上传方式\n        name: 'file' // 必填参数 文件的参数名\n      }\n      var xhr = new XMLHttpRequest()\n      var formData = new FormData()\n      formData.append(uploadConfig.name, file)\n      xhr.open(uploadConfig.methods, uploadConfig.action, true)\n      xhr.setRequestHeader('Authorization', uploadConfig.token) // 设置请求头\n      xhr.send(formData)\n      const quill = this.$refs.myTextEditor.quill\n      // 上传数据成功，会触发\n      xhr.onload = function (res) {\n        if (xhr.status === 200) {\n          res = JSON.parse(xhr.responseText)\n          const length = quill.getSelection(true).index\n          // 这里很重要，你图片上传成功后，img的src需要在这里添加，res.path就是你服务器返回的图片链接。\n          quill.insertEmbed(length, 'image', config.imgUrl + res.data.url)\n          quill.setSelection(length + 1)\n        }\n      }\n      // 上传数据完成（成功或者失败）时会触发\n      xhr.upload.onerror = function (e) {\n        this.$message.error('图片上传失败')\n      }\n    },\n    onEditorChange (event) {\n      event.quill.deleteText(this.limit, 1)\n      if (this.value === 0) {\n        this.TiLength = 0\n      } else {\n        this.TiLength = event.quill.getLength() - 1\n      }\n    }\n  },\n  mounted () {\n    this.init()\n    this.TiLength = this.$refs.myTextEditor.quill.getLength() - 1\n    // 修改富文本设置字体大小\n    const fontSizeStyle = Quill.import('attributors/style/size') // 引入这个后会把样式写在style上\n    fontSizeStyle.whitelist = ['13px', '16px', '18px', '20px', '30px', '40px', '50px', '60px']\n    Quill.register(fontSizeStyle, true)\n\n    // 设置字体样式\n    const Font = Quill.import('attributors/style/font') // 引入这个后会把样式写在style上\n    const fonts = [false, 'Microsoft-YaHei', 'SimSun', 'SimHei', 'KaiTi', 'FangSong']\n    Font.whitelist = fonts // 将字体加入到白名单\n    Quill.register(Font, true)\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.editorBox {\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  /deep/.ql-container {\n    flex: 1 !important;\n    overflow: hidden;\n  }\n}\n/*\n这里一定要写上，是用来把相关改变的配置在工具栏正常显示\n如果不写，字体样式的下拉会重复显示Sans Serif，字体大小的下拉会重复显示Normal\n*/\n\n// .quill-editor /deep/ .ql-container {\n//   min-height: 150px;\n// }\n.quill-editor /deep/ .ql-picker-label {\n  line-height: 24px;\n  vertical-align: 4px;\n}\n.quill-editor /deep/ .ql-picker-options {\n  max-height: 200px;\n  overflow: auto;\n\n  &::-webkit-scrollbar {\n    width: 3px;\n    height: 5px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: transparent;\n    border-radius: 10px;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: transparent;\n    border-radius: 10px;\n  }\n\n  &:hover {\n    &::-webkit-scrollbar-thumb {\n      background: rgb(68, 164, 202);\n      border-radius: 10px;\n    }\n  }\n}\n.quill-editor\n  /deep/\n  .ql-picker.ql-font\n  .ql-picker-label[data-value='SimSun']::before,\n.quill-editor\n  /deep/\n  .ql-picker.ql-font\n  .ql-picker-item[data-value='SimSun']::before {\n  content: '宋体';\n  font-family: 'SimSun' !important;\n}\n.quill-editor\n  /deep/\n  .ql-picker.ql-font\n  .ql-picker-label[data-value='SimHei']::before,\n.quill-editor\n  /deep/\n  .ql-picker.ql-font\n  .ql-picker-item[data-value='SimHei']::before {\n  content: '黑体';\n  font-family: 'SimHei';\n}\n.quill-editor\n  /deep/\n  .ql-picker.ql-font\n  .ql-picker-label[data-value='Microsoft-YaHei']::before,\n.quill-editor\n  /deep/\n  .ql-picker.ql-font\n  .ql-picker-item[data-value='Microsoft-YaHei']::before {\n  content: '微软雅黑';\n  font-family: 'Microsoft YaHei';\n}\n.quill-editor\n  /deep/\n  .ql-picker.ql-font\n  .ql-picker-label[data-value='KaiTi']::before,\n.quill-editor\n  /deep/\n  .ql-picker.ql-font\n  .ql-picker-item[data-value='KaiTi']::before {\n  content: '楷体';\n  font-family: 'KaiTi' !important;\n}\n.quill-editor\n  /deep/\n  .ql-picker.ql-font\n  .ql-picker-label[data-value='FangSong']::before,\n.quill-editor\n  /deep/\n  .ql-picker.ql-font\n  .ql-picker-item[data-value='FangSong']::before {\n  content: '仿宋';\n  font-family: 'FangSong';\n}\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-label[data-value='60px']::before,\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-item[data-value='60px']::before {\n  content: '一号';\n}\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-label[data-value='50px']::before,\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-item[data-value='50px']::before {\n  content: '二号';\n}\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-label[data-value='40px']::before,\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-item[data-value='40px']::before {\n  content: '三号';\n}\n\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-label[data-value='30px']::before,\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-item[data-value='30px']::before {\n  content: '四号';\n}\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-label[data-value='20px']::before,\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-item[data-value='20px']::before {\n  content: '五号';\n}\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-label[data-value='18px']::before,\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-item[data-value='18px']::before {\n  content: '六号';\n}\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-label[data-value='16px']::before,\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-item[data-value='16px']::before {\n  content: '七号';\n}\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-label[data-value='13px']::before,\n.quill-editor\n  /deep/\n  .ql-snow\n  .ql-picker.ql-size\n  .ql-picker-item[data-value='13px']::before {\n  content: '默认';\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=6eab2cdf&scoped=true&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Editor.vue?vue&type=style&index=0&id=6eab2cdf&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6eab2cdf\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"release-wrap\">\n    <van-field\n      class=\"title-wrap\"\n      v-model=\"dataForm.title\"\n      rows=\"2\"\n      autosize\n      type=\"textarea\"\n      translate=\"no\"\n      maxlength=\"50\"\n      :placeholder=\"$t('common.inputTitle')\"\n      show-word-limit\n    />\n    <div class=\"set-image\">\n      <div class=\"name\">{{ $t('admin.setPreview') }}</div>\n      <van-uploader :after-read=\"afterRead\" v-model=\"fileList\">\n        <div class=\"upload\">\n          <van-icon name=\"plus\" size=\"25\" class=\"icon\" />\n          <!-- <div class=\"add\">添加图片</div> -->\n        </div>\n      </van-uploader>\n    </div>\n    <div class=\"editor\" translate=\"no\">\n      <Editor v-model=\"dataForm.content\" height=\"440\"></Editor>\n    </div>\n    <div class=\"icon-group\">\n      <div\n        class=\"icon-normal\"\n        @click=\"handleIsImportant\"\n        v-show=\"!dataForm.isImportant\"\n      ></div>\n      <div\n        class=\"icon-select\"\n        @click=\"handleIsImportant\"\n        v-show=\"dataForm.isImportant\"\n      >\n        <div class=\"dot\"></div>\n      </div>\n      <span>{{ $t('admin.important') }}</span>\n    </div>\n    <div class=\"button\" @click=\"handleAddNews\">{{ $t('admin.release') }}</div>\n  </div>\n</template>\n\n<script>\nimport config from '@/config/app.config'\nimport { handleAddNews, handleNewsDetail, handleEditNews } from '@/services/news'\nimport { upload } from '@/services/upload'\nimport Editor from '../../components/common/Editor.vue'\nconst toolbarOptions = [\n  ['image']\n]\n\nexport default {\n  name: '',\n  data () {\n    return {\n      title: '',\n      fileList: [],\n      dataForm: {\n        title: '',\n        content: null,\n        type: 1,\n        preview: '',\n        isImportant: 0\n      },\n      editorOption: {\n        modules: {\n          toolbar: toolbarOptions\n        },\n        theme: 'snow',\n        placeholder: ''\n      }\n    }\n  },\n  methods: {\n    handleIsImportant () {\n      this.dataForm.isImportant = this.dataForm.isImportant === 0 ? 1 : 0\n    },\n    onEditorChange ({ editor, html, text }) {\n      console.log(123)\n    },\n    // 图片上传\n    async afterRead (file) {\n      // 此时可以自行将文件上传至服务器\n      var formdata = new FormData()\n      formdata.append('file', file.file)\n      const resp = await upload(formdata)\n      if (!resp.success) {\n        this.fileList = []\n        return\n      }\n      this.dataForm.preview = config.imgUrl + resp.data.url\n      console.log(this.fileList)\n    },\n    // 保存\n    async handleAddNews () {\n      if (!this.dataForm.content || !this.dataForm.title || !this.dataForm.preview) {\n        return this.$toast(this.$t('common.fill'))\n      }\n      let resp\n      if (this.$route.query.id) {\n        resp = await handleEditNews(this.dataForm)\n      } else {\n        resp = await handleAddNews(this.dataForm)\n      }\n      if (!resp.success) { return }\n      this.$gbUtils.handleToPage('/mediaAdmin')\n    },\n    // 获取详情\n    async getDetail (id) {\n      const resp = await handleNewsDetail(id)\n      if (!resp.success) { return }\n      this.dataForm = { ...resp.data }\n      console.log('this.dataForm', this.dataForm)\n      this.fileList.push({ url: this.dataForm.preview })\n    }\n  },\n  mounted () {\n    if (this.$route.query.id) {\n      this.getDetail(this.$route.query.id)\n    }\n  },\n  components: { Editor }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.editor {\n  height: 400px;\n  -webkit-user-select: text !important;\n}\n.release-wrap {\n  box-sizing: border-box;\n  background-color: #fff;\n  min-height: 100vh;\n  padding: 20px 15px;\n  padding-bottom: 100px;\n  color: #352c25;\n  .title-wrap {\n    box-shadow: 0px 4px 12px 0px rgba(0, 0, 0, 0.1);\n    border-radius: 4px;\n  }\n  .set-image {\n    margin-top: 30px;\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    .name {\n      position: absolute;\n      left: 0;\n      font-size: 9px;\n    }\n  }\n  .upload {\n    width: 196px;\n    height: 123px;\n    background: #ffffff;\n    box-shadow: 0px 4px 12px 0px rgba(0, 0, 0, 0.1);\n    border-radius: 4px;\n    font-weight: 100;\n    text-align: center;\n    line-height: 123px;\n    color: #dbd9d5;\n  }\n  /deep/ .van-uploader__preview {\n    position: absolute;\n    z-index: 99;\n    height: 123px;\n    width: 100%;\n  }\n  /deep/ .van-uploader__preview-image {\n    height: 100%;\n    width: auto;\n    img {\n      margin: 0 auto;\n      height: 100%;\n      width: auto;\n    }\n  }\n  /deep/ .van-uploader__input-wrapper {\n    width: 100%;\n  }\n  .editor {\n    margin-top: 30px;\n    div.ql-container.ql-snow {\n      height: px2rem(100);\n    }\n\n    div.ql-editor.ql-blank {\n      height: px2rem(50);\n    }\n  }\n  .icon-group {\n    margin-top: 50px;\n    display: flex;\n    align-items: center;\n    .icon-normal {\n      width: 12px;\n      height: 12px;\n      border-radius: 10px;\n      border: 2px solid #352c25;\n    }\n    .icon-select {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      width: 12px;\n      height: 12px;\n      border-radius: 10px;\n      border: 2px solid #352c25;\n      .dot {\n        width: 8px;\n        height: 8px;\n        border-radius: 10px;\n        background-color: #ff2600;\n      }\n    }\n    span {\n      font-size: 9px;\n      color: #352c25;\n      padding-left: 10px;\n    }\n  }\n  .button {\n    margin: 0 auto;\n    margin-top: 100px;\n    width: 255px;\n    height: 40px;\n    font-size: 14px;\n    text-align: center;\n    line-height: 40px;\n    background-color: #00c873;\n    border-radius: 4px;\n    font-weight: 600;\n    color: #fff;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReleaseArticle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReleaseArticle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReleaseArticle.vue?vue&type=template&id=3085d2d2&scoped=true&\"\nimport script from \"./ReleaseArticle.vue?vue&type=script&lang=js&\"\nexport * from \"./ReleaseArticle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ReleaseArticle.vue?vue&type=style&index=0&id=3085d2d2&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3085d2d2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}