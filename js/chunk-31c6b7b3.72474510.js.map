{"version":3,"sources":["webpack:///./src/views/preSale/PreSale.vue?0ec5","webpack:///src/views/preSale/PreSale.vue","webpack:///./src/views/preSale/PreSale.vue?e8b7","webpack:///./src/views/preSale/PreSale.vue","webpack:///./src/views/preSale/PreSale.vue?cc6c"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","type","saleData","on","mintNft","_v","_s","$t","changeShowCodePop","model","value","callback","$$v","code","expression","codeLoading","handleCode","_e","ref","nftFilePath","nftName","changeShowNftPop","scopedSlots","_u","key","fn","countDownTime","countDownFinish","proxy","staticRenderFns","timerCount","name","components","StarBox","SaleInfo","MintBtn","CommomPop","NftPop","LoadingPop","data","timer","total","totalSold","roundNumber","price","isHadNFT","isEligible","rechargeAddress","token","codePopShow","nftShow","nftShowFlag","loadingShow","countShow","methods","init","setTimeout","getInfo","params","queryPreSaleInfo","resp","clearInterval","getNftName","contranctNft","judgeMint","$emit","queryMintKol","setTimer","setInterval","mounted","component"],"mappings":"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","file":"js/chunk-31c6b7b3.72474510.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page\"},[_c('StarBox',{attrs:{\"type\":_vm.type}}),_c('div',{staticClass:\"sale-info\"},[_c('SaleInfo',{attrs:{\"type\":_vm.type,\"info\":_vm.saleData}})],1),_c('MintBtn',{attrs:{\"type\":_vm.type,\"info\":_vm.saleData},on:{\"mintNft\":_vm.mintNft}}),_c('div',{staticClass:\"notice\"},[_c('div',{staticClass:\"notice-title\"},[_vm._v(_vm._s(_vm.$t(\"preSale.rewardRule\")))]),_c('div',[_vm._v(_vm._s(_vm.$t(\"preSale.rule1\")))]),_c('div',[_vm._v(_vm._s(_vm.$t(\"preSale.rule2\")))])]),(_vm.codePopShow)?_c('CommomPop',{on:{\"close\":_vm.changeShowCodePop}},[_c('div',{staticClass:\"pop-wrapper\"},[_c('div',{staticClass:\"pop-title\"},[_vm._v(_vm._s(_vm.$t(\"preSale.inputCode\")))]),_c('van-field',{staticClass:\"form-input\",attrs:{\"input-align\":\"center\",\"placeholder\":_vm.$t('preSale.inputCode'),\"maxlength\":\"6\"},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}}),_c('VanButton',{staticClass:\"mint-btn\",attrs:{\"loading\":_vm.codeLoading,\"disabled\":_vm.code ? false : true},on:{\"click\":_vm.handleCode}},[_vm._v(_vm._s(_vm.$t(\"common.confirm\")))])],1)]):_vm._e(),(_vm.nftShow)?_c('NftPop',{ref:\"nftPop\",attrs:{\"info\":_vm.saleData,\"nftFilePath\":_vm.nftFilePath,\"nftName\":_vm.nftName},on:{\"close\":_vm.changeShowNftPop}}):_vm._e(),(_vm.loadingShow)?_c('LoadingPop',{attrs:{\"needTimer\":false},scopedSlots:_vm._u([(_vm.countShow)?{key:\"countdown\",fn:function(){return [_c('div',{staticClass:\"countDown\"},[_c('vanCountDown',{attrs:{\"time\":_vm.countDownTime,\"format\":\"ss\"},on:{\"finish\":_vm.countDownFinish}}),_vm._v(_vm._s(_vm.$t(\"common.second\"))+\" \")],1)]},proxy:true}:null],null,true)},[_c('div',{staticClass:\"countDown tips\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"preSale.minting\"))+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page\">\n    <StarBox :type=\"type\" />\n    <div class=\"sale-info\">\n      <SaleInfo :type=\"type\" :info=\"saleData\" />\n    </div>\n    <MintBtn :type=\"type\" :info=\"saleData\" @mintNft=\"mintNft\" />\n    <div class=\"notice\">\n      <div class=\"notice-title\">{{ $t(\"preSale.rewardRule\") }}</div>\n      <div>{{ $t(\"preSale.rule1\") }}</div>\n      <div>{{ $t(\"preSale.rule2\") }}</div>\n    </div>\n    <CommomPop v-if=\"codePopShow\" @close=\"changeShowCodePop\">\n      <div class=\"pop-wrapper\">\n        <div class=\"pop-title\">{{ $t(\"preSale.inputCode\") }}</div>\n        <van-field\n          class=\"form-input\"\n          input-align=\"center\"\n          :placeholder=\"$t('preSale.inputCode')\"\n          v-model=\"code\"\n          maxlength=\"6\"\n        ></van-field>\n        <VanButton\n          :loading=\"codeLoading\"\n          :disabled=\"code ? false : true\"\n          class=\"mint-btn\"\n          @click=\"handleCode\"\n          >{{ $t(\"common.confirm\") }}</VanButton\n        >\n      </div>\n    </CommomPop>\n    <NftPop\n      ref=\"nftPop\"\n      v-if=\"nftShow\"\n      @close=\"changeShowNftPop\"\n      :info=\"saleData\"\n      :nftFilePath=\"nftFilePath\"\n      :nftName=\"nftName\"\n    />\n    <LoadingPop :needTimer=\"false\" v-if=\"loadingShow\">\n      <template #countdown v-if=\"countShow\">\n        <div class=\"countDown\">\n          <vanCountDown\n            :time=\"countDownTime\"\n            format=\"ss\"\n            @finish=\"countDownFinish\"\n          />{{ $t(\"common.second\") }}\n        </div>\n      </template>\n      <div class=\"countDown tips\">\n        {{ $t(\"preSale.minting\") }}\n      </div>\n    </LoadingPop>\n  </div>\n</template>\n\n<script>\nimport StarBox from './components/StarBox.vue'\nimport SaleInfo from './components/SaleInfo.vue'\nimport MintBtn from './components/Mint.vue'\nimport CommomPop from '../../components/common/CommomPop.vue'\nimport NftPop from './components/NftPop.vue'\nimport LoadingPop from '../../components/common/LoadingPop.vue'\nimport { queryPreSaleInfo, queryMintKol } from '../../services/preSale'\nimport contranctNft from '../../contracts/contractNFT'\n\nvar timerCount = 12 // 轮询总次数\nexport default {\n  name: '',\n  components: { StarBox, SaleInfo, MintBtn, CommomPop, NftPop, LoadingPop },\n  data () {\n    return {\n      nftFilePath: '',\n      timer: null,\n      type: 0, // 1 团长预售 0 普通\n      saleData: {\n        total: 0,\n        totalSold: 0,\n        roundNumber: 0,\n        price: '1000',\n        isHadNFT: 1, // 是否拥有nft 1 拥有\n        isEligible: 0, // 是否可以购买 1 是（已经填过特邀码）\n        rechargeAddress: '',\n        token: ''\n      },\n      codePopShow: false,\n      codeLoading: false,\n      code: '',\n      nftShow: false,\n      nftShowFlag: false, // 首次弹出\n      loadingShow: false, // loading--显示\n      countDownTime: 60000,\n      countShow: false,\n      nftName: 'StarFish'\n    }\n  },\n  methods: {\n    async init () {\n      this.$emit('changeLoading', true)\n      await this.getNftName()\n      this.getInfo()\n      setTimeout(() => {\n        this.$emit('changeLoading', false)\n      }, 1500)\n    },\n    async getInfo () {\n      const params = {\n        type: this.type\n      }\n      const resp = await queryPreSaleInfo(params)\n      if (!resp.success) return\n      this.saleData = resp.data || this.saleData\n      this.saleData.roundNumber = this.saleData.total\n      if (resp.data.isHadNFT) {\n        this.getNftName(resp.data.tokenType)\n        clearInterval(this.timer)\n        this.timer = null\n        this.loadingShow = false\n        // 不是首次弹出\n        if (!this.nftShowFlag) {\n          this.nftShowFlag = true\n          this.nftShow = true\n        }\n      }\n    },\n    async getNftName (type = 0) {\n      const resp = await contranctNft.getName(type)\n      if (!resp.success) return\n      this.nftName = resp.result\n    },\n    judgeMint () {\n      // 0 未绑定\n      // if (this.saleData.isEligible) {\n      //   this.$emit('changeLoading', true)\n      //   this.mintNft()\n      // } else {\n      //   this.changeShowCodePop()\n      // }\n      this.$emit('changeLoading', true)\n      this.mintNft()\n    },\n    changeShowCodePop () {\n      this.codePopShow = !this.codePopShow\n    },\n    // 填写特邀码\n    async handleCode () {\n      if (!this.code) return\n      this.codeLoading = true\n      const resp = await queryMintKol(this.code)\n      if (!resp.success) {\n        this.codeLoading = false\n        return\n      }\n      this.mintNft()\n    },\n    async mintNft () {\n      this.$emit('changeLoading', true)\n      if (!this.saleData.token || !this.saleData.rechargeAddress) { return this.$emit('changeLoading', false) }\n      this.$emit('changeLoadingIconType', 1)\n      const resp = await this.$web3.transferToken(\n        this.saleData.token,\n        this.saleData.rechargeAddress,\n        this.saleData.price\n      )\n      this.codeLoading = false\n      this.$emit('changeLoading', false)\n      if (!resp.success) return\n      // 显示loading\n      this.$emit('changeLoadingIconType', 1)\n      this.countShow = true\n      this.loadingShow = true\n      this.setTimer() // 设定计时器查询\n    },\n    countDownFinish () {\n      this.countShow = false\n    },\n    setTimer () {\n      this.timer = setInterval(() => {\n        timerCount = timerCount - 1\n        this.getInfo()\n        if (timerCount <= 1) {\n          clearInterval(this.timer)\n          this.timer = null\n        }\n      }, 5000)\n    },\n    changeShowNftPop () {\n      this.nftShow = !this.nftShow\n      this.codePopShow = false\n    }\n  },\n  mounted () {\n    this.init()\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.page {\n  color: #dbd9d5;\n  padding: 40px 23px 23px;\n  box-sizing: border-box;\n  .sale-info {\n    margin-top: 40px;\n  }\n  .pop-wrapper {\n    .pop-title {\n      margin-bottom: 50px;\n      color: #dbd9d5;\n      font-size: 16px;\n      font-weight: bold;\n    }\n    .form-input {\n      background: #dbd9d5;\n      box-shadow: 0px 5px 4px 0px rgba(23, 23, 25, 1);\n      border-radius: 4px;\n      margin: 8px auto;\n    }\n    .mint-btn {\n      box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 1);\n      background-color: rgba(248, 187, 90, 1);\n      border-radius: 4px;\n      height: 50px;\n      width: 100%;\n      border: none;\n      margin: 20px auto;\n      font-size: 14px;\n      font-weight: bold;\n    }\n  }\n  .countDown {\n    display: flex;\n    justify-content: center;\n    margin-bottom: 10px;\n    font-size: 14px;\n    line-height: 1.5em;\n    /deep/ .van-count-down {\n      color: #fff;\n      font-size: 14px;\n      margin: 0px 5px 0 5px;\n      line-height: 1.5em;\n    }\n    &.tips {\n      padding-bottom: 10px;\n      margin-top: 10px;\n      text-align: center;\n    }\n  }\n  .notice {\n    font-size: 10px;\n    padding: 0 15px;\n    .notice-title {\n      font-size: 14px;\n    }\n    div {\n      padding: 4px 0;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreSale.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreSale.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PreSale.vue?vue&type=template&id=7f6856b7&scoped=true&\"\nimport script from \"./PreSale.vue?vue&type=script&lang=js&\"\nexport * from \"./PreSale.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PreSale.vue?vue&type=style&index=0&id=7f6856b7&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f6856b7\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreSale.vue?vue&type=style&index=0&id=7f6856b7&scoped=true&lang=scss&\""],"sourceRoot":""}