(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f19f5bd"],{"022a":function(e,t,n){},"4b76":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("ProposalForm",{attrs:{isEdit:!0,dateSource:e.proposalInfo,isCouncil:e.isCouncil,tokenInfo:e.tokenInfo,tokenAuth:e.tokenAuth,loadingApprove:e.loadingApprove,loadingAdd:e.loadingAdd},on:{approveToken:e.approveToken,addProposal:e.handleAdd}})],1)},o=[],a=n("1da1"),s=n("5530"),u=(n("96cf"),n("ac1f"),n("5319"),n("b0c0"),n("85b0")),c=n("fcfc"),i=n("1f5d"),p=n("f645"),l=n("2f62"),d={name:"",components:{ProposalForm:u["a"]},data:function(){return{point:.01,daoAt:"",isCouncil:!1,proposalInfo:{},tokenInfo:{name:"-",totalSupply:0,tokenAddress:""},tokenAuth:!1,loadingApprove:!1,loadingAdd:!1}},computed:Object(s["a"])({},Object(l["c"])(["proposalDetail"])),methods:{init:function(){this.getInfo()},getInfo:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("proposalDetail",e.proposalDetail),e.proposalDetail||e.$router.replace("/detail"),e.proposalInfo=e.proposalDetail,e.daoAt=e.proposalInfo.daoAt,e.proposalId=e.proposalInfo.index,e.tokenInfo.tokenAddress=e.proposalInfo.token,e.getIsCouncil(),e.getTokenInfo();case 8:case"end":return t.stop()}}),t)})))()},getIsCouncil:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].councliAt(e.daoAt);case 2:if(n=t.sent,n.success){t.next=5;break}return t.abrupt("return");case 5:n.result?e.isCouncil=!0:e.isCouncil=!1;case 6:case"end":return t.stop()}}),t)})))()},getTokenInfo:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.getSymbol(),t.next=3,e.getTotalSupply();case 3:e.getTokenAllance();case 4:case"end":return t.stop()}}),t)})))()},getSymbol:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].getSymbol(e.tokenInfo.tokenAddress);case 2:if(n=t.sent,n.success){t.next=5;break}return t.abrupt("return");case 5:e.tokenInfo.name=n.result;case 6:case"end":return t.stop()}}),t)})))()},getTotalSupply:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].totalSupply(e.tokenInfo.tokenAddress);case 2:if(n=t.sent,n.success){t.next=5;break}return t.abrupt("return");case 5:e.tokenInfo.totalSupply=n.result;case 6:case"end":return t.stop()}}),t)})))()},getTokenAllance:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].allowance(e.tokenInfo.tokenAddress,p["a"].daoAddress);case 2:if(n=t.sent,n.success){t.next=5;break}return t.abrupt("return");case 5:r=n.result,e.tokenAuth=r>=e.tokenInfo.totalSupply*e.point;case 7:case"end":return t.stop()}}),t)})))()},approveToken:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingApprove=!0,t.next=3,i["a"].approve(e.tokenInfo.tokenAddress,p["a"].daoAddress);case 3:if(n=t.sent,e.loadingApprove=!1,n.success){t.next=7;break}return t.abrupt("return");case 7:e.tokenAuth=!0;case 8:case"end":return t.stop()}}),t)})))()},handleAdd:function(e,t,n,r){var o=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o.loadingAdd=!0,a.next=3,c["a"].proposalEdit(o.daoAt,o.proposalId,e,t,n,r);case 3:if(s=a.sent,o.loadingAdd=!1,console.log(s),s.success){a.next=8;break}return a.abrupt("return");case 8:o.$toast("success"),o.$gbUtils.handleToPage("/detail");case 10:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.init()},beforeDestroy:function(){}},f=d,k=(n("a551"),n("2877")),g=Object(k["a"])(f,r,o,!1,null,"0a66a475",null);t["default"]=g.exports},a551:function(e,t,n){"use strict";n("022a")}}]);
//# sourceMappingURL=chunk-4f19f5bd.73203365.js.map