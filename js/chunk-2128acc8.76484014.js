(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2128acc8"],{"4ac8":function(a,t,e){},"7e20":function(a,t,e){"use strict";e("b9da")},b88f:function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"page"},[e("DaoRule"),e("div",{staticClass:"info-box"},[e("div",{staticClass:"key-value"},[e("div",{staticClass:"key"},[a._v(" "+a._s(a.createDao.logo)+" "),e("span",{staticClass:"fu-title important"},[a._v("(100*100)")])]),e("VanUploader",{staticClass:"logo-box",attrs:{translate:"no",multiple:"",accept:"image/jpg, image/jpeg, image/png","max-count":1,"after-read":a.handleUpLogo},model:{value:a.imageList,callback:function(t){a.imageList=t},expression:"imageList"}},[e("div",{staticClass:"upload-icon"},[a._v("+")])])],1),e("div",{staticClass:"key-value"},[e("div",{staticClass:"key"},[a._v(" "+a._s(a.createDao.daoName)+" "),e("span",{staticClass:"fu-title"},[a._v(" ("+a._s(a.createDao.cn)+")")])]),e("VanField",{staticClass:"input-box",attrs:{translate:"no","input-align":"center",placeholder:a.createDao.pleaseInput,maxlength:"40"},model:{value:a.params.nameCn,callback:function(t){a.$set(a.params,"nameCn",t)},expression:"params.nameCn"}})],1),e("div",{staticClass:"key-value"},[e("div",{staticClass:"key"},[a._v(" "+a._s(a.createDao.daoName)+" "),e("span",{staticClass:"fu-title"},[a._v(" ("+a._s(a.createDao.en)+")")])]),e("VanField",{staticClass:"input-box",attrs:{translate:"no","input-align":"center",placeholder:a.createDao.pleaseInput,maxlength:"40"},model:{value:a.params.nameEn,callback:function(t){a.$set(a.params,"nameEn",t)},expression:"params.nameEn"}})],1),e("div",{staticClass:"key-value"},[e("div",{staticClass:"key"},[a._v(" "+a._s(a.createDao.desc)+" "),e("span",{staticClass:"fu-title"},[a._v(" ("+a._s(a.createDao.cn)+")")])]),e("VanField",{staticClass:"textarea-box",attrs:{translate:"no",type:"textarea",cols:"10",rows:"5",maxlength:"100","show-word-limit":"",placeholder:a.createDao.pleaseInput},model:{value:a.params.descCn,callback:function(t){a.$set(a.params,"descCn",t)},expression:"params.descCn"}})],1),e("div",{staticClass:"key-value"},[e("div",{staticClass:"key"},[a._v(" "+a._s(a.createDao.desc)+" "),e("span",{staticClass:"fu-title"},[a._v(" ("+a._s(a.createDao.en)+")")])]),e("VanField",{staticClass:"textarea-box",attrs:{translate:"no",type:"textarea",cols:"10",rows:"5",maxlength:"200","show-word-limit":"",placeholder:a.createDao.pleaseInput},model:{value:a.params.descEn,callback:function(t){a.$set(a.params,"descEn",t)},expression:"params.descEn"}})],1),e("div",{staticClass:"key-value"},[e("div",{staticClass:"key"},[a._v(" "+a._s(a.createDao.webSite)+" "),e("span",{staticClass:"fu-title"},[a._v(" ("+a._s(a.common.optional)+")")])]),e("VanField",{staticClass:"input-box",attrs:{translate:"no","input-align":"center",placeholder:a.createDao.pleaseInput,maxlength:"200"},model:{value:a.params.webSite,callback:function(t){a.$set(a.params,"webSite",t)},expression:"params.webSite"}})],1),e("div",{staticClass:"key-value"},[e("div",{staticClass:"key"},[a._v(" "+a._s(a.createDao.Twitter)+" "),e("span",{staticClass:"fu-title"},[a._v(" ("+a._s(a.common.optional)+")")])]),e("VanField",{staticClass:"input-box",attrs:{translate:"no","input-align":"center",placeholder:a.createDao.pleaseInput,maxlength:"200"},model:{value:a.params.Twitter,callback:function(t){a.$set(a.params,"Twitter",t)},expression:"params.Twitter"}})],1),e("div",{staticClass:"key-value"},[e("div",{staticClass:"key"},[a._v(" "+a._s(a.createDao.Telegram)+" "),e("span",{staticClass:"fu-title"},[a._v(" ("+a._s(a.common.optional)+")")])]),e("VanField",{staticClass:"input-box",attrs:{translate:"no","input-align":"center",placeholder:a.createDao.pleaseInput,maxlength:"200"},model:{value:a.params.Telegram,callback:function(t){a.$set(a.params,"Telegram",t)},expression:"params.Telegram"}})],1),e("div",{staticClass:"key-value"},[e("div",{staticClass:"key"},[a._v(" "+a._s(a.createDao.Discord)+" "),e("span",{staticClass:"fu-title"},[a._v(" ("+a._s(a.common.optional)+")")])]),e("VanField",{staticClass:"input-box",attrs:{translate:"no","input-align":"center",placeholder:a.createDao.pleaseInput,maxlength:"200"},model:{value:a.params.Discord,callback:function(t){a.$set(a.params,"Discord",t)},expression:"params.Discord"}})],1),e("div",{staticClass:"key-value"},[e("div",{staticClass:"key"},[a._v(" "+a._s(a.createDao.tokenAddress)+" "),e("span",{staticClass:"fu-title"},[a._v("(BEP20)")])]),e("VanField",{staticClass:"input-box input-address",attrs:{translate:"no","input-align":"center",placeholder:a.createDao.pleaseInput,disabled:""},model:{value:a.tokenAddress,callback:function(t){a.tokenAddress=t},expression:"tokenAddress"}})],1)]),e("div",{staticClass:"token-info"},[e("div",[a._v(" "+a._s(a.createDao.tokenName)+": "),a.loadingTokenName?e("VanLoading",{attrs:{size:"14",color:"#105CFB"}}):e("span",{staticClass:"token-green"},[a._v(a._s(a.tokenName))])],1),e("div",[a._v(" "+a._s(a.createDao.totalSupply)+": "),a.loadingSupply?e("VanLoading",{attrs:{size:"14",color:"#105CFB"}}):e("span",{staticClass:"token-green"},[a._v(a._s(a.$gbUtils.formatNumber(a.totalSupply)))])],1)]),e("div",{staticClass:"lp-info"},[e("div",{staticClass:"key"},[a._v(a._s(a.createDao.isSupportedLp))]),e("div",{staticClass:"btn-groups"},[e("VanButton",{staticClass:"btn",class:{active:a.isSupportLp},attrs:{disabled:""},on:{click:function(t){return a.handleChange(!0)}}},[a._v(" "+a._s(a.createDao.supported)+" ")]),e("VanButton",{staticClass:"btn",class:{active:!a.isSupportLp},attrs:{disabled:""},on:{click:function(t){return a.handleChange(!1)}}},[a._v(" "+a._s(a.createDao.notSupported)+" ")])],1),a.isSupportLp?e("div",{staticClass:"key-valye"},[e("div",{staticClass:"key"},[a._v(" "+a._s(a.createDao.pleaseInput+a.createDao.lpAddress)+" "),e("span",{staticClass:"fu-title"},[a._v("(BEP20)")])]),e("VanField",{staticClass:"input-box lp-address",attrs:{translate:"no","input-align":"center",placeholder:a.createDao.pleaseInput,maxlength:"200",disabled:""},model:{value:a.lpAddress,callback:function(t){a.lpAddress=t},expression:"lpAddress"}})],1):a._e()]),e("VanButton",{staticClass:"create-btn",attrs:{loading:a.loadingAdd,disabled:!a.params.logo||!a.params.nameCn||!a.params.nameEn||!a.params.descCn||!a.params.descEn},on:{click:a.handleAdd}},[a._v(" "+a._s(a.common.confirm)+" ")])],1)},n=[],i=e("c7eb"),r=e("1da1"),o=e("5530"),l=(e("ac1f"),e("5319"),e("b64b"),e("07ac"),e("fcfc")),c=e("1f5d"),p=e("5bbb4"),d=e("2f62"),u=e("0e5c"),m={name:"",components:{DaoRule:p["a"]},data:function(){return{daoDetail:{},daoAt:"",point:1e-6,imageList:[],params:{logo:"",nameCn:"",nameEn:"",descCn:"",descEn:"",Twitter:"",Telegram:"",Discord:"",webSite:""},tokenAddress:"",isSupportLp:!0,lpAddress:"",tokenName:"-",loadingTokenName:!1,totalSupply:0,loadingSupply:!1,loadingAdd:!1,hasSupport:!0}},computed:Object(o["a"])(Object(o["a"])({},Object(d["c"])(["myAccount"])),{},{rule:function(){return this.$t("createDao.rule",{point:100*this.point})},createDao:function(){return this.$t("createDao")},common:function(){return this.$t("common")}}),watch:{tokenAddress:function(a){this.getTokenInfo(a)}},methods:{init:function(){var a=localStorage.getItem("daoDetail");if(!a)return this.$router.replace("/my");this.daoDetail=JSON.parse(a),this.formatData()},formatData:function(){this.daoAt=this.daoDetail.daoAt,this.tokenAddress=this.daoDetail.token,this.hasSupport="0x0000000000000000000000000000000000000000"!==this.daoDetail.lp,this.isSupportLp=this.hasSupport,this.lpAddress=this.hasSupport?this.daoDetail.lp:"";var a=Object.keys(this.params),t=this.daoDetail.params;for(var e in t)this.params[a[e]]=t[e];this.imageList.push({url:this.params.logo,isImage:!0})},handleUpLogo:function(a){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(a),t.$emit("changeLoading",!0),e.next=4,Object(u["a"])(a.file);case 4:if(s=e.sent,console.log(s),t.$emit("changeLoading",!1),s.success){e.next=10;break}return t.imageList=[],e.abrupt("return");case 10:t.params.logo=s.result;case 11:case"end":return e.stop()}}),e)})))()},handleChange:function(a){this.isSupportLp=a},getTokenInfo:function(a){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=10;break}if(a=a.replace(/\s/g,""),t.isTokenAddress=t.$web3.isAddress(a),t.isTokenAddress){e.next=5;break}return e.abrupt("return");case 5:return t.getTokenName(),e.next=8,t.getTokenSupply();case 8:e.next=12;break;case 10:t.tokenName="-",t.totalSupply=0;case 12:case"end":return e.stop()}}),e)})))()},getTokenName:function(){var a=this;return Object(r["a"])(Object(i["a"])().mark((function t(){var e;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.loadingTokenName=!0,t.next=3,c["a"].getSymbol(a.tokenAddress);case 3:if(e=t.sent,a.loadingTokenName=!1,e.success){t.next=7;break}return t.abrupt("return");case 7:a.tokenName=e.result;case 8:case"end":return t.stop()}}),t)})))()},getTokenSupply:function(){var a=this;return Object(r["a"])(Object(i["a"])().mark((function t(){var e;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.loadingSupply=!0,t.next=3,c["a"].totalSupply(a.tokenAddress);case 3:if(e=t.sent,a.loadingSupply=!1,e.success){t.next=7;break}return t.abrupt("return");case 7:a.totalSupply=e.result;case 8:case"end":return t.stop()}}),t)})))()},handleAdd:function(){if(this.isSupportLp&&!this.lpAddress)return this.$toast(this.createDao.pleaseInput+"lpAddress");if(this.isSupportLp&&!this.$web3.isAddress(this.lpAddress))return this.$toast("地址不正确");if(parseFloat(this.tokenBalance)<this.totalSupply*this.point)return this.$toast(this.common.notBalance);var a=Object.values(this.params),t=this.tokenAddress,e=this.isSupportLp?this.lpAddress:"0x0000000000000000000000000000000000000000";this.addDao(a,t,e)},addDao:function(a,t,e){var s=this;return Object(r["a"])(Object(i["a"])().mark((function n(){var r;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,s.$web3.connectWallet();case 2:return s.loadingAdd=!0,n.next=5,l["a"].daoEdit(s.daoAt,a,t,e);case 5:if(r=n.sent,s.loadingAdd=!1,r.success){n.next=9;break}return n.abrupt("return",s.$toast("fail"));case 9:s.$router.replace("/my");case 10:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.init()},beforeDestroy:function(){localStorage.removeItem("daoDetail")}},v=m,h=(e("c807"),e("7e20"),e("2877")),b=Object(h["a"])(v,s,n,!1,null,"31764c0a",null);t["default"]=b.exports},b9da:function(a,t,e){},c807:function(a,t,e){"use strict";e("4ac8")}}]);
//# sourceMappingURL=chunk-2128acc8.76484014.js.map